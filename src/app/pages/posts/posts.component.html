<div class="d-flex align-items-center justify-content-center">
    <div class="container-fluid  p-md-4 mt-5">
        <h2 class="pt-4 fw-bold text-secondary">Latest Posts</h2>

        <div class="card border-0 shadow-sm overflow-hidden">

            <!-- <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar> -->
            <div class="loader-container" *ngIf="isLoading">
                <mat-progress-bar mode="indeterminate" class="big-bar"></mat-progress-bar>
                <p class="mt-3 text-muted fw-bold">Loading data...</p>
            </div>

            <div class="table-container">
                <table mat-table [dataSource]="dataSource" matSort class="w-100 align-middle">

                    <ng-container matColumnDef="title">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Post Details </th>
                        <td mat-cell *matCellDef="let post" class="py-3 pe-3">
                            <span class="d-block fw-bold text-dark fs-6 title-text">{{ post.title }}</span>
                            <small class="text-muted d-none d-md-block text-truncate" style="max-width: 300px;">
                                {{ post.body }}
                            </small>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="tags">
                        <th mat-header-cell *matHeaderCellDef class="d-none d-md-table-cell"> Tags </th>
                        <td mat-cell *matCellDef="let post" class="d-none d-md-table-cell">
                            <mat-chip-set>
                                <mat-chip *ngFor="let tag of post.tags.slice(0, 2)" class="small-chip">
                                    {{ tag }}
                                </mat-chip>
                            </mat-chip-set>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="stats">
                        <th mat-header-cell *matHeaderCellDef> Engagement </th>
                        <td mat-cell *matCellDef="let post">
                            <div class="d-flex flex-column flex-md-row gap-2 gap-md-4">
                                <span class="d-flex align-items-center text-success fw-bold mobile-stat">
                                    <i class="bi bi-hand-thumbs-up-fill me-1"></i>
                                    {{ post.reactions.likes }}
                                </span>
                                <span class="d-flex align-items-center text-muted mobile-stat">
                                    <i class="bi bi-eye-fill me-1"></i>
                                    {{ post.views }}
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover-row"
                        style="cursor: pointer" (click)="openPost(row.id)"></tr>
                </table>
            </div>
            <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
        </div>
    </div>
</div>